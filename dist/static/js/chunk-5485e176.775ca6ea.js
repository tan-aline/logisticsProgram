(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5485e176"],{1481:function(t,e,n){},"28a5":function(t,e,n){"use strict";var a=n("aae3"),r=n("cb7c"),i=n("ebd6"),s=n("0390"),o=n("9def"),l=n("5f1b"),c=n("520a"),u=n("79e5"),d=Math.min,p=[].push,g="split",f="length",h="lastIndex",m=4294967295,b=!u((function(){RegExp(m,"y")}));n("214f")("split",2,(function(t,e,n,u){var v;return v="c"=="abbc"[g](/(b)*/)[1]||4!="test"[g](/(?:)/,-1)[f]||2!="ab"[g](/(?:ab)*/)[f]||4!="."[g](/(.?)(.?)/)[f]||"."[g](/()()/)[f]>1||""[g](/.?/)[f]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!a(t))return n.call(r,t,e);var i,s,o,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,g=void 0===e?m:e>>>0,b=new RegExp(t.source,u+"g");while(i=c.call(b,r)){if(s=b[h],s>d&&(l.push(r.slice(d,i.index)),i[f]>1&&i.index<r[f]&&p.apply(l,i.slice(1)),o=i[0][f],d=s,l[f]>=g))break;b[h]===i.index&&b[h]++}return d===r[f]?!o&&b.test("")||l.push(""):l.push(r.slice(d)),l[f]>g?l.slice(0,g):l}:"0"[g](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,a){var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r,a):v.call(String(r),n,a)},function(t,e){var a=u(v,t,this,e,v!==n);if(a.done)return a.value;var c=r(t),p=String(this),g=i(c,RegExp),f=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),y=new g(b?c:"^(?:"+c.source+")",h),x=void 0===e?m:e>>>0;if(0===x)return[];if(0===p.length)return null===l(y,p)?[p]:[];var _=0,C=0,w=[];while(C<p.length){y.lastIndex=b?C:0;var S,I=l(y,b?p:p.slice(C));if(null===I||(S=d(o(y.lastIndex+(b?0:C)),p.length))===_)C=s(p,C,f);else{if(w.push(p.slice(_,C)),w.length===x)return w;for(var k=1;k<=I.length-1;k++)if(w.push(I[k]),w.length===x)return w;C=_=S}}return w.push(p.slice(_)),w}]}))},2934:function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return l}));var a=n("b775"),r=function(t){return Object(a["a"])("/web-manager/common/transportLineType/simple","get",t)},i=function(t){return Object(a["a"])("/truckType/simple","get",t)},s=function(t){return Object(a["a"])("/web-manager/common/fleet/simple","get",t)},o=function(t){return Object(a["a"])("/areas/children","get",t)},l=function(t){return Object(a["a"])("/workspace","get",t)}},4783:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"organization-manage org log-list customer-list-box dashboard-container"},[n("div",{staticClass:"test"},[n("div",{staticClass:"log-list-left"},[n("el-scrollbar",{staticStyle:{width:"100%","margin-bottom":"50px"}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"app-container"},[n("el-tree",{ref:"orgTree",staticClass:"filter-tree customer-tree-box",staticStyle:{"font-size":"12px display: none"},attrs:{props:t.defaultProps,"check-strictly":!0,data:t.orgTree,indent:22,"filter-node-method":t.filterNode,"highlight-current":"","node-key":"id","expand-on-click-node":!1,"default-expanded-keys":t.treeExpandData},on:{"node-click":t.nodeClick}})],1)])],1)],1),t._v(" "),n("div",{staticClass:"log-list-right"},[n("el-card",{staticClass:"box-card",attrs:{shadow:"always"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("机构信息")])]),t._v(" "),n("div",[n("el-form",{ref:"form",staticClass:"form-bottom",staticStyle:{width:"90%","text-align":"center"},attrs:{model:t.org,"label-position":"right","label-width":"120px"}},[n("el-row",[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"机构编号"}},[n("el-input",{attrs:{disabled:""},model:{value:t.org.id,callback:function(e){t.$set(t.org,"id",e)},expression:"org.id"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"机构名称",prop:"parentId",disabled:""}},[n("el-input",{attrs:{disabled:""},model:{value:t.org.name,callback:function(e){t.$set(t.org,"name",e)},expression:"org.name"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"机构类型",prop:"orgType",disabled:""}},[n("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",clearable:"",placeholder:"请选择"},model:{value:t.org.type,callback:function(e){t.$set(t.org,"type",e)},expression:"org.type"}},t._l(t.orgTypeOptions,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-form-item",{attrs:{label:"机构地址",prop:"describe"}},[n("el-row",{staticStyle:{margin:"0"},attrs:{gutter:24}},[n("el-col",{staticStyle:{padding:"0"},attrs:{span:8}},[n("el-select",{attrs:{value:null!==t.org.province?t.org.province.id:"",placeholder:"请选择省","value-key":"id",clearable:"",disabled:!t.isCanSubmit},on:{change:function(e){return t.getCity(e,!0)}}},t._l(t.provinceList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("el-col",{staticStyle:{padding:"0 4px"},attrs:{span:8}},[n("el-select",{attrs:{value:null!==t.org.city?t.org.city.id:"","value-key":"id",clearable:"",placeholder:"请选择市",disabled:!t.isCanSubmit||!t.org.province.id},on:{change:function(e){return t.getCounty(e,!0)}}},t._l(t.cityList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t._v(" "),n("el-col",{staticStyle:{padding:"0"},attrs:{span:8}},[n("el-select",{attrs:{value:t.countyId,"value-key":"id",clearable:"",placeholder:"请选择县/区",disabled:!t.isCanSubmit||!t.org.city.id},on:{change:t.getCurrent}},t._l(t.countryList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[n("el-input",{attrs:{maxlength:"20",disabled:!t.isCanSubmit},model:{value:t.org.address,callback:function(e){t.$set(t.org,"address",e)},expression:"org.address"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"经度",prop:"longitude"}},[n("el-input",{attrs:{disabled:"",maxlength:"20"},model:{value:t.org.longitude,callback:function(e){t.$set(t.org,"longitude",e)},expression:"org.longitude"}},[n("span",{staticStyle:{color:"#20232a","font-weight":"400","font-size":"14px","font-family":"PingFangSC, PingFangSC-Regular","margin-right":"14px","line-height":"40px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("E")])])],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"纬度",prop:"latitude"}},[n("el-input",{attrs:{disabled:"",maxlength:"20"},model:{value:t.org.latitude,callback:function(e){t.$set(t.org,"latitude",e)},expression:"org.latitude"}},[n("span",{staticStyle:{color:"#20232a","font-weight":"400","font-size":"14px","font-family":"PingFangSC, PingFangSC-Regular","margin-right":"14px","line-height":"40px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("N")])])],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"机构负责人",prop:"contractNumber"}},[n("el-input",{attrs:{maxlength:"20",disabled:!t.isCanSubmit},model:{value:t.org.managerName,callback:function(e){t.$set(t.org,"managerName",e)},expression:"org.managerName"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"机构电话",prop:"abbreviation"}},[n("el-input",{attrs:{maxlength:"200",disabled:!t.isCanSubmit},model:{value:t.org.phone,callback:function(e){t.$set(t.org,"phone",e)},expression:"org.phone"}})],1)],1)],1),t._v(" "),t.org.id?n("el-button",{staticStyle:{width:"89px",height:"36px",padding:"10px 20px"},attrs:{type:"warning"},on:{click:t.submit}},[t._v(t._s(t.isCanSubmit?"保存":"编辑"))]):t._e()],1)],1)]),t._v(" "),n("el-card",{staticClass:"box-card org-index",staticStyle:{"margin-top":"20px","box-shadow":"none"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("员工信息")])]),t._v(" "),t.dataList&&t.dataList.length>0?n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.dataList,fit:"",stripe:"","header-cell-style":{background:"rgba(250,252,255,1)"}}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"员工编号","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.userId))])]}}],null,!1,1145735290)}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"员工姓名","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.name))])]}}],null,!1,2020036417)}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"手机号","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.mobile))])]}}],null,!1,2596132294)}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"所属机构","min-width":"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(null===e.row.agency?"":e.row.agency.name))])]}}],null,!1,691562540)}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"系统账户","min-width":"100",prop:"account"}}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"系统角色","min-width":"100",prop:"stationName"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.roleNames&&e.row.roleNames.join(",")))])]}}],null,!1,256928903)}),t._v(" "),n("el-table-column",{attrs:{align:"left",label:"账号状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.status?n("div",{staticClass:"tableColumn-status",class:{"stop-use":"0"===String(e.row.status)}},[t._v("\n                "+t._s("1"===String(e.row.status)?"正常":"禁用")+"\n              ")]):n("div")]}}],null,!1,2647740718)})],1):n("empty",{attrs:{src:"../../assets/empty.png",desc:"这里空空如也~"}}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.total>5,expression:"total > 5"}],staticClass:"pagination"},[n("div",{staticClass:"pages"},[n("el-pagination",{attrs:{"current-page":Number(t.requestParameters.page),total:Number(t.total),"page-size":Number(t.requestParameters.pageSize),"page-sizes":[5,10,20,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)])])},r=[],i=(n("ac6a"),n("28a5"),n("c5f6"),n("7f7f"),n("98b2")),s=n("2934"),o=n("5850"),l={name:"OrgManager",data:function(){return{total:0,requestParameters:{page:1,pageSize:5,agencyId:""},dataList:[],defaultProps:{children:"children",label:"name"},treeExpandData:[],treeExpandData2:[],provincialCenterId:"",provincialCenterId2:[],countyId:"",name:"",orgTypeOptions:"",orgTree:[],parentName:"无上级",provinceList:[],cityList:[],countryList:[],isCanSubmit:!1,org:this.initOrg()}},mounted:function(){this.orgTypeOptions=i,this.initOrgTree()},methods:{initOrg:function(){return this.countyId="",{id:"",name:"",type:"",address:"",managerName:"",provinceId:"",cityId:"",countyId:"",phone:"",parentId:0,latitude:"",longitude:"",county:{id:""},province:{id:""},city:{id:""}}},submit:function(){var t=this,e=this.org,n={id:e.id,name:e.name,type:e.type,provinceId:e.province?e.province.id:"",cityId:e.province?e.city.id:"",countyId:e.county?e.county.id:"",address:e.address,managerName:e.managerName,phone:e.phone};return this.isCanSubmit?e.address?e.province.id&&e.city.id&&this.countyId?void Object(o["d"])(n).then((function(e){200===Number(e.code)?(t.$message.success("机构信息保存成功"),t.isCanSubmit=!1):t.$message.error(e.msg||"机构信息保存失败")})).catch((function(e){t.$message.error(e.msg||"机构信息保存失败")})):this.$message.error("请选择机构地址"):this.$message.error("请填写详细地址"):this.isCanSubmit=!this.isCanSubmit},getProvince:function(t){var e=this;Object(s["a"])({parentId:t}).then((function(t){e.provinceList=t.data}))},getCity:function(t,e){var n=this;Object(s["a"])({parentId:t}).then((function(a){n.cityList=a.data,n.org.province.id=t,e&&(n.org.city.id="",n.countyId="")}))},getCounty:function(t,e){var n=this;Object(s["a"])({parentId:t}).then((function(a){n.countryList=a.data,n.org.city.id=t,e&&(n.countyId="")}))},getCurrent:function(t){this.org.county.id=t,this.countyId=t},getExpandData:function(t){var e=this,n=t.split(",");n.forEach((function(t){e.treeExpandData.push(t)}))},getExpandData2:function(t){this.treeExpandData2=[t];var e=this;setTimeout((function(){e.nodeClick(t)}),50)},initOrgTree:function(){var t=this;Object(o["a"])({}).then((function(e){var n=e.data;t.orgTree=JSON.parse(n),t.provincialCenterId=t.orgTree[0].children[0].id,t.provincialCenterId2=t.orgTree[0].children[0].children[0],t.$nextTick((function(){this.$refs["orgTree"].setCurrentKey(this.orgTree[0].children[0].children[0].id)})),t.getExpandData2(t.provincialCenterId2),t.getExpandData(t.provincialCenterId)}))},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},nodeClick:function(t){var e=this;this.requestParameters.agencyId=t.id,this.isCanSubmit=!1,this.showEdit=!0,this.showSave=!1,Object(o["b"])(t.id).then((function(t){e.org=t.data,e.countyId="",null===t.data.province&&(e.org.province={}),null===t.data.city&&(e.org.city={}),null===t.data.county&&(e.org.county={}),e.getProvince(),null!==t.data.city&&t.data.city.id&&(e.getCity(t.data.province.id,!1),e.getCounty(t.data.city.id,!1)),null!==t.data.county&&t.data.county.id&&(e.countyId=t.data.county.id)})).catch((function(){e.$message.error("获取机构详情失败"),e.org=e.initOrg()})),this.getList()},getList:function(){var t=this;Object(o["c"])(this.requestParameters).then((function(e){t.dataList=e.data.items,t.total=e.data.counts}))},handleSizeChange:function(t){this.requestParameters.pageSize=t,1===this.requestParameters.page&&this.getList(this.requestParameters)},handleCurrentChange:function(t){this.requestParameters.page=t,this.getList()}}},c=l,u=(n("4cdb"),n("993b"),n("2877")),d=Object(u["a"])(c,a,r,!1,null,"04339e5b",null);e["default"]=d.exports},"4cdb":function(t,e,n){"use strict";var a=n("5213"),r=n.n(a);r.a},5213:function(t,e,n){},5850:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return o}));var a=n("b775"),r=function(t){return Object(a["a"])("/business-hall/tree","get",t)},i=function(t){return Object(a["a"])("/business-hall/".concat(t),"get",t)},s=function(t){return Object(a["a"])("/business-hall/user/page","get",t)},o=function(t){return Object(a["a"])("/business-hall","post",t)}},"5dbc":function(t,e,n){var a=n("d3f4"),r=n("8b97").set;t.exports=function(t,e,n){var i,s=e.constructor;return s!==n&&"function"==typeof s&&(i=s.prototype)!==n.prototype&&a(i)&&r&&r(t,i),t}},"8b97":function(t,e,n){var a=n("d3f4"),r=n("cb7c"),i=function(t,e){if(r(t),!a(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,a){try{a=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),a(t,[]),e=!(t instanceof Array)}catch(r){e=!0}return function(t,n){return i(t,n),e?t.__proto__=n:a(t,n),t}}({},!1):void 0),check:i}},"98b2":function(t){t.exports=[{id:1,name:"一级转运中心"},{id:2,name:"二级转运中心"},{id:3,name:"营业部"}]},"993b":function(t,e,n){"use strict";var a=n("1481"),r=n.n(a);r.a},aa77:function(t,e,n){var a=n("5ca1"),r=n("be13"),i=n("79e5"),s=n("fdef"),o="["+s+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(t,e,n){var r={},o=i((function(){return!!s[t]()||l[t]()!=l})),c=r[t]=o?e(p):s[t];n&&(r[n]=c),a(a.P+a.F*o,"String",r)},p=d.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},c5f6:function(t,e,n){"use strict";var a=n("7726"),r=n("69a8"),i=n("2d95"),s=n("5dbc"),o=n("6a99"),l=n("79e5"),c=n("9093").f,u=n("11e9").f,d=n("86cc").f,p=n("aa77").trim,g="Number",f=a[g],h=f,m=f.prototype,b=i(n("2aeb")(m))==g,v="trim"in String.prototype,y=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var n,a,r,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var s,l=e.slice(2),c=0,u=l.length;c<u;c++)if(s=l.charCodeAt(c),s<48||s>r)return NaN;return parseInt(l,a)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(b?l((function(){m.valueOf.call(n)})):i(n)!=g)?s(new h(y(e)),n,f):y(e)};for(var x,_=n("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;_.length>C;C++)r(h,x=_[C])&&!r(f,x)&&d(f,x,u(h,x));f.prototype=m,m.constructor=f,n("2aba")(a,g,f)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);